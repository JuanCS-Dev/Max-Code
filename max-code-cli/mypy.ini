[mypy]
# Boris Cherny Type Safety Configuration
# Standard: Maximum type safety for production code

# Python version
python_version = 3.11

# Import discovery
mypy_path = max-code-cli
namespace_packages = True
explicit_package_bases = True

# Type checking strictness
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = False  # Click decorators don't have types
no_implicit_optional = True
strict_optional = True

# Warnings
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

# Error messages
show_error_context = True
show_column_numbers = True
show_error_codes = True
pretty = True

# Incremental mode
incremental = True
cache_dir = .mypy_cache

# Strict mode components (Boris Cherny recommended)
disallow_any_unimported = False  # Too strict for now
disallow_any_expr = False        # Too strict for now
disallow_any_decorated = False   # Too strict for now
disallow_any_explicit = False    # Too strict for now
disallow_subclassing_any = True
warn_incomplete_stub = True

# ============================================================
# Per-module options for gradual typing adoption
# ============================================================

# Tests don't need strict typing (yet)
[mypy-tests.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = False

# Test files
[mypy-test_*]
disallow_untyped_defs = False
disallow_incomplete_defs = False

# Setup.py doesn't need strict typing
[mypy-setup]
ignore_errors = True

# Third-party libraries without stubs
[mypy-prompt_toolkit.*]
ignore_missing_imports = True

[mypy-textual.*]
ignore_missing_imports = True

[mypy-anthropic.*]
ignore_missing_imports = True

[mypy-langchain.*]
ignore_missing_imports = True

[mypy-langchain_community.*]
ignore_missing_imports = True

[mypy-langchain_core.*]
ignore_missing_imports = True

[mypy-qdrant_client.*]
ignore_missing_imports = True

[mypy-structlog.*]
ignore_missing_imports = True

# ============================================================
# Gradual typing plan
# ============================================================

# Phase 1 (DONE): SDK modules - 100% typed
# [mypy-sdk.*]
# # Already strict

# Phase 2 (IN PROGRESS): CLI modules - adding types
# [mypy-cli.*]
# # Gradually increasing strictness

# Phase 3 (PENDING): Agent modules
# [mypy-agents.*]
# disallow_untyped_defs = True  # Enable after adding types

# Phase 4 (PENDING): Core modules
# [mypy-core.*]
# disallow_untyped_defs = True  # Enable after adding types

# ============================================================
# Boris Cherny Standards
# ============================================================

# "Se não tem tipos, não é produção" - Boris Cherny
#
# This configuration enforces:
# ✅ Type safety máxima
# ✅ Explicit over implicit
# ✅ No silent failures
# ✅ Production-ready code
#
# Target: 100% type coverage across all production code
#
# Progress:
# - sdk/: 90%+ (Phase 1 complete)
# - cli/: 20% (Phase 2 in progress)
# - agents/: 10% (Phase 3 pending)
# - core/: 15% (Phase 4 pending)
